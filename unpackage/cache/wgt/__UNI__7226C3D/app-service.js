if("undefined"==typeof Promise||Promise.prototype.finally||(Promise.prototype.finally=function(e){const t=this.constructor;return this.then((o=>t.resolve(e()).then((()=>o))),(o=>t.resolve(e()).then((()=>{throw o}))))}),"undefined"!=typeof uni&&uni&&uni.requireGlobal){const e=uni.requireGlobal();ArrayBuffer=e.ArrayBuffer,Int8Array=e.Int8Array,Uint8Array=e.Uint8Array,Uint8ClampedArray=e.Uint8ClampedArray,Int16Array=e.Int16Array,Uint16Array=e.Uint16Array,Int32Array=e.Int32Array,Uint32Array=e.Uint32Array,Float32Array=e.Float32Array,Float64Array=e.Float64Array,BigInt64Array=e.BigInt64Array,BigUint64Array=e.BigUint64Array}uni.restoreGlobal&&uni.restoreGlobal(Vue,weex,plus,setTimeout,clearTimeout,setInterval,clearInterval),function(e,t){"use strict";const o=(e,t)=>{const o=e.__vccOpts||e;for(const[a,s]of t)o[a]=s;return o};const a=o({name:"homeHead",data:()=>({})},[["render",function(t,o,a,s,i,n){return e.openBlock(),e.createElementBlock("view",null,[e.createElementVNode("view",{class:"home-head"},[e.createElementVNode("image",{class:"home-icon",src:"/static/homepage/image.png"}),e.createElementVNode("image",{class:"home-title",src:"/static/homepage/title.png"})])])}],["__scopeId","data-v-19582a22"]]);function s(e,t,...o){uni.__log__?uni.__log__(e,t,...o):console[e].apply(console,[...o,t])}function i(e,o){return t.isString(e)?o:e}class n{constructor(e,t){this.options=e,this.animation=uni.createAnimation({...e}),this.currentStepAnimates={},this.next=0,this.$=t}_nvuePushAnimates(e,t){let o=this.currentStepAnimates[this.next],a={};if(a=o||{styles:{},config:{}},l.includes(e)){a.styles.transform||(a.styles.transform="");let o="";"rotate"===e&&(o="deg"),a.styles.transform+=`${e}(${t+o}) `}else a.styles[e]=`${t}`;this.currentStepAnimates[this.next]=a}_animateRun(e={},t={}){let o=this.$.$refs.ani.ref;if(o)return new Promise(((a,s)=>{nvueAnimation.transition(o,{styles:e,...t},(e=>{a()}))}))}_nvueNextAnimate(e,t=0,o){let a=e[t];if(a){let{styles:s,config:i}=a;this._animateRun(s,i).then((()=>{t+=1,this._nvueNextAnimate(e,t,o)}))}else this.currentStepAnimates={},"function"==typeof o&&o(),this.isEnd=!0}step(e={}){return this.animation.step(e),this}run(e){this.$.animationData=this.animation.export(),this.$.timer=setTimeout((()=>{"function"==typeof e&&e()}),this.$.durationTime)}}const l=["matrix","matrix3d","rotate","rotate3d","rotateX","rotateY","rotateZ","scale","scale3d","scaleX","scaleY","scaleZ","skew","skewX","skewY","translate","translate3d","translateX","translateY","translateZ"];function c(e,t){if(t)return clearTimeout(t.timer),new n(e,t)}l.concat(["opacity","backgroundColor"],["width","height","left","right","top","bottom"]).forEach((e=>{n.prototype[e]=function(...t){return this.animation[e](...t),this}}));const r=o({name:"uniTransition",emits:["click","change"],props:{show:{type:Boolean,default:!1},modeClass:{type:[Array,String],default:()=>"fade"},duration:{type:Number,default:300},styles:{type:Object,default:()=>({})},customClass:{type:String,default:""},onceRender:{type:Boolean,default:!1}},data:()=>({isShow:!1,transform:"",opacity:1,animationData:{},durationTime:300,config:{}}),watch:{show:{handler(e){e?this.open():this.isShow&&this.close()},immediate:!0}},computed:{stylesObject(){let e={...this.styles,"transition-duration":this.duration/1e3+"s"},t="";for(let o in e){t+=this.toLine(o)+":"+e[o]+";"}return t},transformStyles(){return"transform:"+this.transform+";opacity:"+this.opacity+";"+this.stylesObject}},created(){this.config={duration:this.duration,timingFunction:"ease",transformOrigin:"50% 50%",delay:0},this.durationTime=this.duration},methods:{init(e={}){e.duration&&(this.durationTime=e.duration),this.animation=c(Object.assign(this.config,e),this)},onClick(){this.$emit("click",{detail:this.isShow})},step(e,t={}){if(this.animation){for(let t in e)try{"object"==typeof e[t]?this.animation[t](...e[t]):this.animation[t](e[t])}catch(o){s("error","at uni_modules/uni-transition/components/uni-transition/uni-transition.vue:148",`方法 ${t} 不存在`)}return this.animation.step(t),this}},run(e){this.animation&&this.animation.run(e)},open(){clearTimeout(this.timer),this.transform="",this.isShow=!0;let{opacity:e,transform:t}=this.styleInit(!1);void 0!==e&&(this.opacity=e),this.transform=t,this.$nextTick((()=>{this.timer=setTimeout((()=>{this.animation=c(this.config,this),this.tranfromInit(!1).step(),this.animation.run(),this.$emit("change",{detail:this.isShow})}),20)}))},close(e){this.animation&&this.tranfromInit(!0).step().run((()=>{this.isShow=!1,this.animationData=null,this.animation=null;let{opacity:e,transform:t}=this.styleInit(!1);this.opacity=e||1,this.transform=t,this.$emit("change",{detail:this.isShow})}))},styleInit(e){let t={transform:""},o=(e,o)=>{"fade"===o?t.opacity=this.animationType(e)[o]:t.transform+=this.animationType(e)[o]+" "};return"string"==typeof this.modeClass?o(e,this.modeClass):this.modeClass.forEach((t=>{o(e,t)})),t},tranfromInit(e){let t=(e,t)=>{let o=null;"fade"===t?o=e?0:1:(o=e?"-100%":"0","zoom-in"===t&&(o=e?.8:1),"zoom-out"===t&&(o=e?1.2:1),"slide-right"===t&&(o=e?"100%":"0"),"slide-bottom"===t&&(o=e?"100%":"0")),this.animation[this.animationMode()[t]](o)};return"string"==typeof this.modeClass?t(e,this.modeClass):this.modeClass.forEach((o=>{t(e,o)})),this.animation},animationType:e=>({fade:e?1:0,"slide-top":`translateY(${e?"0":"-100%"})`,"slide-right":`translateX(${e?"0":"100%"})`,"slide-bottom":`translateY(${e?"0":"100%"})`,"slide-left":`translateX(${e?"0":"-100%"})`,"zoom-in":`scaleX(${e?1:.8}) scaleY(${e?1:.8})`,"zoom-out":`scaleX(${e?1:1.2}) scaleY(${e?1:1.2})`}),animationMode:()=>({fade:"opacity","slide-top":"translateY","slide-right":"translateX","slide-bottom":"translateY","slide-left":"translateX","zoom-in":"scale","zoom-out":"scale"}),toLine:e=>e.replace(/([A-Z])/g,"-$1").toLowerCase()}},[["render",function(t,o,a,s,i,n){return e.withDirectives((e.openBlock(),e.createElementBlock("view",{ref:"ani",animation:i.animationData,class:e.normalizeClass(a.customClass),style:e.normalizeStyle(n.transformStyles),onClick:o[0]||(o[0]=(...e)=>n.onClick&&n.onClick(...e))},[e.renderSlot(t.$slots,"default")],14,["animation"])),[[e.vShow,i.isShow]])}]]);const h=o({name:"uniPopup",components:{},emits:["change","maskClick"],props:{animation:{type:Boolean,default:!0},type:{type:String,default:"center"},isMaskClick:{type:Boolean,default:null},maskClick:{type:Boolean,default:null},backgroundColor:{type:String,default:"none"},safeArea:{type:Boolean,default:!0},maskBackgroundColor:{type:String,default:"rgba(0, 0, 0, 0.4)"},borderRadius:{type:String}},watch:{type:{handler:function(e){this.config[e]&&this[this.config[e]](!0)},immediate:!0},isDesktop:{handler:function(e){this.config[e]&&this[this.config[this.type]](!0)},immediate:!0},maskClick:{handler:function(e){this.mkclick=e},immediate:!0},isMaskClick:{handler:function(e){this.mkclick=e},immediate:!0},showPopup(e){}},data(){return{duration:300,ani:[],showPopup:!1,showTrans:!1,popupWidth:0,popupHeight:0,config:{top:"top",bottom:"bottom",center:"center",left:"left",right:"right",message:"top",dialog:"center",share:"bottom"},maskClass:{position:"fixed",bottom:0,top:0,left:0,right:0,backgroundColor:"rgba(0, 0, 0, 0.4)"},transClass:{backgroundColor:"transparent",borderRadius:this.borderRadius||"0",position:"fixed",left:0,right:0},maskShow:!0,mkclick:!0,popupstyle:"top"}},computed:{getStyles(){let e={backgroundColor:this.bg};return this.borderRadius,e=Object.assign(e,{borderRadius:this.borderRadius}),e},isDesktop(){return this.popupWidth>=500&&this.popupHeight>=500},bg(){return""===this.backgroundColor||"none"===this.backgroundColor?"transparent":this.backgroundColor}},mounted(){(()=>{const{windowWidth:e,windowHeight:t,windowTop:o,safeArea:a,screenHeight:s,safeAreaInsets:i}=uni.getSystemInfoSync();this.popupWidth=e,this.popupHeight=t+(o||0),a&&this.safeArea?this.safeAreaInsets=i.bottom:this.safeAreaInsets=0})()},unmounted(){this.setH5Visible()},activated(){this.setH5Visible(!this.showPopup)},deactivated(){this.setH5Visible(!0)},created(){null===this.isMaskClick&&null===this.maskClick?this.mkclick=!0:this.mkclick=null!==this.isMaskClick?this.isMaskClick:this.maskClick,this.animation?this.duration=300:this.duration=0,this.messageChild=null,this.clearPropagation=!1,this.maskClass.backgroundColor=this.maskBackgroundColor},methods:{setH5Visible(e=!0){},closeMask(){this.maskShow=!1},disableMask(){this.mkclick=!1},clear(e){e.stopPropagation(),this.clearPropagation=!0},open(e){if(this.showPopup)return;e&&-1!==["top","center","bottom","left","right","message","dialog","share"].indexOf(e)||(e=this.type),this.config[e]?(this[this.config[e]](),this.$emit("change",{show:!0,type:e})):s("error","at uni_modules/uni-popup/components/uni-popup/uni-popup.vue:298","缺少类型：",e)},close(e){this.showTrans=!1,this.$emit("change",{show:!1,type:this.type}),clearTimeout(this.timer),this.timer=setTimeout((()=>{this.showPopup=!1}),300)},touchstart(){this.clearPropagation=!1},onTap(){this.clearPropagation?this.clearPropagation=!1:(this.$emit("maskClick"),this.mkclick&&this.close())},top(e){this.popupstyle=this.isDesktop?"fixforpc-top":"top",this.ani=["slide-top"],this.transClass={position:"fixed",left:0,right:0,backgroundColor:this.bg,borderRadius:this.borderRadius||"0"},e||(this.showPopup=!0,this.showTrans=!0,this.$nextTick((()=>{this.messageChild&&"message"===this.type&&this.messageChild.timerClose()})))},bottom(e){this.popupstyle="bottom",this.ani=["slide-bottom"],this.transClass={position:"fixed",left:0,right:0,bottom:0,paddingBottom:this.safeAreaInsets+"px",backgroundColor:this.bg,borderRadius:this.borderRadius||"0"},e||(this.showPopup=!0,this.showTrans=!0)},center(e){this.popupstyle="center",this.ani=["zoom-out","fade"],this.transClass={position:"fixed",display:"flex",flexDirection:"column",bottom:0,left:0,right:0,top:0,justifyContent:"center",alignItems:"center",borderRadius:this.borderRadius||"0"},e||(this.showPopup=!0,this.showTrans=!0)},left(e){this.popupstyle="left",this.ani=["slide-left"],this.transClass={position:"fixed",left:0,bottom:0,top:0,backgroundColor:this.bg,borderRadius:this.borderRadius||"0",display:"flex",flexDirection:"column"},e||(this.showPopup=!0,this.showTrans=!0)},right(e){this.popupstyle="right",this.ani=["slide-right"],this.transClass={position:"fixed",bottom:0,right:0,top:0,backgroundColor:this.bg,borderRadius:this.borderRadius||"0",display:"flex",flexDirection:"column"},e||(this.showPopup=!0,this.showTrans=!0)}}},[["render",function(t,o,a,s,n,l){const c=i(e.resolveDynamicComponent("uni-transition"),r);return n.showPopup?(e.openBlock(),e.createElementBlock("view",{key:0,class:e.normalizeClass(["uni-popup",[n.popupstyle,l.isDesktop?"fixforpc-z-index":""]])},[e.createElementVNode("view",{onTouchstart:o[1]||(o[1]=(...e)=>l.touchstart&&l.touchstart(...e))},[n.maskShow?(e.openBlock(),e.createBlock(c,{key:"1",name:"mask","mode-class":"fade",styles:n.maskClass,duration:n.duration,show:n.showTrans,onClick:l.onTap},null,8,["styles","duration","show","onClick"])):e.createCommentVNode("",!0),e.createVNode(c,{key:"2","mode-class":n.ani,name:"content",styles:n.transClass,duration:n.duration,show:n.showTrans,onClick:l.onTap},{default:e.withCtx((()=>[e.createElementVNode("view",{class:e.normalizeClass(["uni-popup__wrapper",[n.popupstyle]]),style:e.normalizeStyle(l.getStyles),onClick:o[0]||(o[0]=(...e)=>l.clear&&l.clear(...e))},[e.renderSlot(t.$slots,"default",{},void 0,!0)],6)])),_:3},8,["mode-class","styles","duration","show","onClick"])],32)],2)):e.createCommentVNode("",!0)}],["__scopeId","data-v-ee521468"]]),p=uni.createInnerAudioContext();p.autoplay=!1,p.src="";const d=o({name:"homeFoot",props:{pageType:{type:Boolean,default:!0}},data:()=>({chatMsg:"",holding:!0,recoging:!1,holderText:"正在听，请说出你的问题...",recogText:""}),methods:{TestPage(){uni.navigateTo({url:"/pages/test/test"})},navigateHome(){let e=getCurrentPages(),t=e[e.length-1].route;const o="/pages/index/index";s("log","at components/home-foot/home-foot.vue:73",t,o),o!=t&&uni.navigateTo({url:o})},navigatePerson(){let e=getCurrentPages(),t=e[e.length-1].route;const o="/pages/personal/personal";s("log","at components/home-foot/home-foot.vue:83",t,o),o!=t&&uni.navigateTo({url:o})},assist(){const e=getCurrentPages();s("log","at components/home-foot/home-foot.vue:94",e[e.length-1]),this.recoging=!1,this.holding=!0,this.holderText="正在听，请说出你的问题...",this.$refs.popup.open(),s("log","at components/home-foot/home-foot.vue:101","开始录音"),recorderManager.start()},stopMic(){var e=this;s("log","at components/home-foot/home-foot.vue:106","录音结束"),this.holderText="正在识别...",recorderManager.stop(),recorderManager.onStop((function(t){s("log","at components/home-foot/home-foot.vue:110",JSON.stringify(t)),uni.uploadFile({url:"http://8.137.38.90:8000/speechtotext",filePath:t.tempFilePath,name:"mp3",formData:{},success:t=>{s("log","at components/home-foot/home-foot.vue:117","上传成功："+JSON.stringify(t));const o=JSON.parse(t.data);e.chatMsg=o.text,e.close()},fail:t=>{s("error","at components/home-foot/home-foot.vue:122","上传录音失败："+t),e.close()}})}))},close(){const e=getCurrentPages();s("log","at components/home-foot/home-foot.vue:131",e[e.length-1]);var t=-1;const o=["/pages/smart-travel/smart-travel","/pages/photo-recog/photo_nvue","/pages/smart-chat/smart-chat","/pages/assist-read/photo_nvue"];if(this.recoging=!0,this.holding=!1,this.chatMsg.includes("出行"))this.recogText="即将为你打开智能出行...",t=0;else if(this.chatMsg.includes("识图")||this.chatMsg.includes("拍照"))this.recogText="即将为你打开拍照识图...",t=1;else if(this.chatMsg.includes("助手")||this.chatMsg.includes("健康"))this.recogText="即将为你打开智能健康助手...",t=2;else if(this.chatMsg.includes("阅读"))this.recogText="即将为你打开辅助阅读...",t=3;else{this.recogText="抱歉，我没听清...",setTimeout((()=>{s("log","at components/home-foot/home-foot.vue:157","Timeout Here!"),this.$refs.popup.close()}),5e3);const e=this.recogText,t=encodeURI(e);s("log","at components/home-foot/home-foot.vue:163",t),p.src="https://tts.baidu.com/text2audio.mp3?lan=ZH&cuid=baike\n\t\t\t\t\t\t&spd=6&ctp=1&amp&pdt=301&tex="+t,s("log","at components/home-foot/home-foot.vue:166",p.src),p.play(),s("log","at components/home-foot/home-foot.vue:168","play over!!!")}setTimeout((()=>{this.$refs.popup.close(),uni.navigateTo({url:o[t]})}),3e3);const a=this.recogText,i=encodeURI(a);s("log","at components/home-foot/home-foot.vue:181",i),p.src="https://tts.baidu.com/text2audio.mp3?lan=ZH&cuid=baike\n\t\t\t\t\t&spd=6&ctp=1&amp&pdt=301&tex="+i,s("log","at components/home-foot/home-foot.vue:184",p.src),p.play(),s("log","at components/home-foot/home-foot.vue:186","play over!!!")}}},[["render",function(t,o,a,s,n,l){const c=i(e.resolveDynamicComponent("uni-popup"),h);return e.openBlock(),e.createElementBlock("view",null,[e.createElementVNode("footer",{class:"footer-container"},[a.pageType?(e.openBlock(),e.createElementBlock("div",{key:0,class:"footer-parter-left"},[e.createElementVNode("img",{src:"https://img-insight.oss-cn-chengdu.aliyuncs.com/home-icon.png",class:"icon-footer",id:"home-icon",onClick:o[0]||(o[0]=(...e)=>l.navigateHome&&l.navigateHome(...e))}),e.createElementVNode("text",{class:"footer-words",style:{color:"#08DF86"}}," 首页 ")])):(e.openBlock(),e.createElementBlock("div",{key:1,class:"footer-parter-left"},[e.createElementVNode("img",{src:"https://img-insight.oss-cn-chengdu.aliyuncs.com/black_home.png",class:"icon-footer",id:"home-icon",onClick:o[1]||(o[1]=(...e)=>l.navigateHome&&l.navigateHome(...e))}),e.createElementVNode("text",{class:"footer-words"}," 首页 ")])),e.createElementVNode("div",{class:"footer-parter-center"},[e.createElementVNode("img",{src:"https://img-insight.oss-cn-chengdu.aliyuncs.com/segment.png",class:"icon-footer-center",onTouchstart:o[2]||(o[2]=(...e)=>l.assist&&l.assist(...e)),onTouchend:o[3]||(o[3]=(...e)=>l.close&&l.close(...e))},null,32),e.createElementVNode("text",{class:"footer-words"}," 智能助手 ")]),a.pageType?(e.openBlock(),e.createElementBlock("div",{key:2,class:"footer-parter-right"},[e.createElementVNode("img",{src:"https://img-insight.oss-cn-chengdu.aliyuncs.com/user.png",class:"icon-footer",id:"user-icon",onClick:o[4]||(o[4]=(...e)=>l.navigatePerson&&l.navigatePerson(...e))}),e.createElementVNode("text",{class:"footer-words"}," 个人 ")])):(e.openBlock(),e.createElementBlock("div",{key:3,class:"footer-parter-right"},[e.createElementVNode("img",{src:"https://img-insight.oss-cn-chengdu.aliyuncs.com/green_person.png",class:"icon-footer",id:"user-icon",onClick:o[5]||(o[5]=(...e)=>l.navigatePerson&&l.navigatePerson(...e))}),e.createElementVNode("text",{class:"footer-words",style:{color:"#08DF86"}}," 个人 ")])),e.createVNode(c,{ref:"popup",type:"bottom",class:"popup"},{default:e.withCtx((()=>[e.createElementVNode("view",{class:"popup"},[n.holding?(e.openBlock(),e.createElementBlock("text",{key:0,class:"holderText"},e.toDisplayString(n.holderText),1)):e.createCommentVNode("",!0),n.recoging?(e.openBlock(),e.createElementBlock("text",{key:1,class:"responseText"},e.toDisplayString(n.recogText),1)):e.createCommentVNode("",!0),e.createElementVNode("image",{class:"popup-gif",src:"/static/homepage/sound.gif"})])])),_:1},512)])])}],["__scopeId","data-v-42bd7cf7"]]);const m=o({data:()=>({holding:!0,recoging:!1}),onLoad(){}},[["render",function(t,o,s,n,l,c){const r=i(e.resolveDynamicComponent("home-head"),a),h=i(e.resolveDynamicComponent("home-foot"),d);return e.openBlock(),e.createElementBlock("view",{class:"main-container"},[e.createVNode(r),e.createElementVNode("div",{class:"content"},[e.createElementVNode("div",{class:"content-first-row"},[e.createElementVNode("navigator",{id:"link-to-smart-travel",url:"/pages/smart-travel/cover_nvue"}," 智能出行 "),e.createElementVNode("navigator",{id:"link-to-snap-recognize",url:"/pages/photo-recog/photo_nvue"},[e.createElementVNode("img",{src:"https://img-insight.oss-cn-chengdu.aliyuncs.com/snap-icon.png"}),e.createTextVNode(" 拍照识图 ")])]),e.createElementVNode("div",{class:"content-second-row"},[e.createElementVNode("navigator",{id:"link-to-health-assistant",url:"/pages/smart-chat/smart-chat"},[e.createElementVNode("text",null,"智能健康助手"),e.createElementVNode("image",{src:"/static/homepage/poe.png"})]),e.createElementVNode("navigator",{id:"link-to-assist-read",url:"/pages/assist-read/photo_nvue"},[e.createElementVNode("text",null,"辅助阅读"),e.createElementVNode("image",{src:"/static/homepage/book.png"})])])]),e.createVNode(h,{pageType:!0})])}]]);const g=o({data:()=>({pathList:[{path:"/pages/recTest/native_test",lebal:"测试音频"},{path:"/pages/test-camera/cover_nvue",lebal:"测试摄像头"},{path:"/pages/test_api/test-upload",lebal:"测试API"},{path:"/pages/test-page/test-page",lebal:"测试Page"}]}),methods:{TestPage(e){uni.navigateTo({url:e})}}},[["render",function(t,o,a,s,i,n){return e.openBlock(),e.createElementBlock("view",null,[e.createElementVNode("div",{class:"container"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(i.pathList,((t,o)=>(e.openBlock(),e.createElementBlock("button",{key:o,onClick:e=>n.TestPage(t.path)},e.toDisplayString(t.lebal),9,["onClick"])))),128))])])}]]),u=uni.createInnerAudioContext();u.autoplay=!1,u.src="";const v=o({name:"bot-chat",props:{msgList:{type:Array,default:[]}},data:()=>({userId:"",chatMsg:""}),methods:{play(e){const t=this.msgList[e].botContent,o=encodeURI(t);s("log","at components/bot-chat/bot-chat.vue:87",o),u.src="https://tts.baidu.com/text2audio.mp3?lan=ZH&cuid=baike\n\t\t\t\t\t&spd="+this.speed+"&ctp=1&amp&pdt=301&tex="+o,s("log","at components/bot-chat/bot-chat.vue:90",u.src),u.play(),s("log","at components/bot-chat/bot-chat.vue:92","play over!!!")}}},[["render",function(t,o,a,s,i,n){return e.openBlock(),e.createElementBlock("view",null,[e.createElementVNode("view",{id:"msglistview",class:"chat-body"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.msgList,((t,o)=>(e.openBlock(),e.createElementBlock("view",{key:o},[""!=t.userContent?(e.openBlock(),e.createElementBlock("view",{key:0,class:"item self"},[e.createElementVNode("view",{class:"content right"},e.toDisplayString(t.userContent),1),e.createElementVNode("view",{class:"avatar"},[e.createElementVNode("image",{src:"https://img-insight.oss-cn-chengdu.aliyuncs.com/tmp/avatar.jpg"})])])):e.createCommentVNode("",!0),""!=t.botContent?(e.openBlock(),e.createElementBlock("view",{key:1,class:"item Ai"},[e.createElementVNode("view",{class:"avatar"},[e.createElementVNode("image",{src:"/static/smart-chat/icon-bot.png"})]),e.createElementVNode("view",{class:"content left",onClick:e=>n.play(o)},e.toDisplayString(t.botContent),9,["onClick"])])):e.createCommentVNode("",!0)])))),128))])])}],["__scopeId","data-v-a1cf3d65"]]);const f=o({name:"press-mic",data:()=>({})},[["render",function(t,o,a,s,i,n){return e.openBlock(),e.createElementBlock("view",{class:"speakarea"},[e.createElementVNode("image",{src:"/static/smart-chat/press-mic.png"})])}],["__scopeId","data-v-2971675b"]]),y=uni.getRecorderManager(),k=uni.createInnerAudioContext();k.autoplay=!1,k.src="";const b=o({data:()=>({keyboardHeight:100,showbox1:!0,showbox2:!1,showbox:!0,chatMsg:"",speak_mode:!0,type_mode:!1,show_listen:!1,msgModified:!1,placeholder:"请输入你想问的...",msglist:[{botContent:"hello，请问我有什么可以帮助你的吗？",recordId:0,titleId:0,userContent:"",userId:0}],backUrl:"",baseUrl:""}),updated(){""!=this.chatMsg?this.placeholder="":this.placeholder="请输入你想问的..."},onLoad(){this.backUrl=getApp().globalData.backUrl,this.baseUrl=getApp().globalData.baseUrl},onUnload(){uni.offKeyboardHeightChange()},methods:{keyboardInput(){""!=this.chatMsg?this.placeholder="":this.placeholder="请输入你想问的..."},toggle1(){this.showbox1=!this.showbox1,this.showbox2=!1,this.showbox=this.showbox1,this.scrollTotop()},toggle2(){this.showbox1=!1,this.showbox2=!this.showbox2,this.showbox=this.showbox2,this.scrollTotop()},pxTorpx(e){let t=750/wx.getSystemInfoSync().windowWidth*Number(e);return Math.floor(t)},scrollTotop(){uni.createSelectorQuery().select(".scroll-view").boundingClientRect((e=>{s("log","at pages/smart-chat/smart-chat.vue:156",e);const t=e.top;s("log","at pages/smart-chat/smart-chat.vue:158","scroll view selected!!"),uni.pageScrollTo({duration:100,scrollTop:t})})).exec()},scrollTobottom(){uni.createSelectorQuery().select(".scroll-view").boundingClientRect((e=>{s("log","at pages/smart-chat/smart-chat.vue:167",e);const t=e.bottom;s("log","at pages/smart-chat/smart-chat.vue:169","scroll view selected!!"),uni.pageScrollTo({duration:100,scrollTop:t})})).exec()},keyboardInput(){this.placeholder=""},touchstart(){this.show_listen=!0,this.startRecord()},touchend(){this.show_listen=!1,this.endRecord()},togglemode(){this.speak_mode=!this.speak_mode,this.type_mode=!this.type_mode},startRecord(){s("log","at pages/smart-chat/smart-chat.vue:192","开始录音"),y.start()},endRecord(){var e=this;const t=e.baseUrl+"/speechtotext";s("log","at pages/smart-chat/smart-chat.vue:198","录音结束"),s("log","at pages/smart-chat/smart-chat.vue:199",t),y.stop(),y.onStop((function(o){s("log","at pages/smart-chat/smart-chat.vue:202",JSON.stringify(o)),uni.uploadFile({url:t,filePath:o.tempFilePath,name:"mp3",formData:{},success:t=>{s("log","at pages/smart-chat/smart-chat.vue:209","上传成功："+JSON.stringify(t));const o=JSON.parse(t.data);e.chatMsg=o.text,e.typeSend()},fail:e=>{s("error","at pages/smart-chat/smart-chat.vue:214","上传录音失败："+e)}})}))},typeSend(){this.showbox1=this.showbox2=!1,this.showbox=!1,this.msgModified=!0,this.msglist.push({botContent:"",recordId:0,titleId:0,userContent:this.chatMsg,userId:0}),this.msglist.push({botContent:"思考中...",recordId:0,titleId:0,userContent:"",userId:0}),uni.request({url:this.baseUrl+"/healthbot",method:"POST",data:{prompt:this.chatMsg},success:e=>{s("log","at pages/smart-chat/smart-chat.vue:246",e),this.msglist.pop();try{const t=e.data;this.msglist.push({botContent:t.response,recordId:0,titleId:0,userContent:"",userId:0});const o=encodeURI(t.response);s("log","at pages/smart-chat/smart-chat.vue:259",o),k.src="https://tts.baidu.com/text2audio.mp3?lan=ZH&cuid=baike\n\t\t\t\t\t\t\t\t&spd="+this.speed+"&ctp=1&amp&pdt=301&tex="+o,k.play()}catch(t){this.msglist.push({botContent:"发送失败",recordId:0,titleId:0,userContent:"",userId:0});const e=encodeURI("发送失败");s("log","at pages/smart-chat/smart-chat.vue:272",e),k.src="https://tts.baidu.com/text2audio.mp3?lan=ZH&cuid=baike\n\t\t\t\t\t\t\t\t&spd="+this.speed+"&ctp=1&amp&pdt=301&tex="+e,k.play()}},fail:e=>{s("log","at pages/smart-chat/smart-chat.vue:279",e),this.msglist.pop(),this.msglist.push({botContent:"发送失败",recordId:0,titleId:0,userContent:"",userId:0});const t=encodeURI("发送失败");k.src="https://tts.baidu.com/text2audio.mp3?lan=ZH&cuid=baike\n\t\t\t\t\t\t\t&spd="+this.speed+"&ctp=1&amp&pdt=301&tex="+t,s("log","at pages/smart-chat/smart-chat.vue:291",k.src),k.play()}}),this.chatMsg="",this.scrollTobottom()}}},[["render",function(t,o,a,s,n,l){const c=i(e.resolveDynamicComponent("bot-chat"),v),r=i(e.resolveDynamicComponent("press-mic"),f);return e.openBlock(),e.createElementBlock("view",{class:"wholeview"},[e.createElementVNode("view",{class:"topview"}),e.createElementVNode("view",{class:"topbar"},[e.createElementVNode("view",{class:"topbarleft"},[e.createElementVNode("text",{class:"topbarlefttitle"}," 健康助手 "),e.createElementVNode("view",{class:"topbarlefticon",onClick:o[0]||(o[0]=(...e)=>l.toggle1&&l.toggle1(...e))},[e.createElementVNode("text",{class:"topbarlefticontext"},"Λ")])]),e.createElementVNode("image",{class:"topbarright",src:"/static/smart-chat/manage.png",onClick:o[1]||(o[1]=(...e)=>l.toggle2&&l.toggle2(...e))})]),e.createElementVNode("scroll-view",{style:e.normalizeStyle({height:`${t.windowHeight}rpx`}),id:"scrollview","scroll-y":"true","scroll-top":t.scrollTop,class:"scroll-view"},[e.createElementVNode("view",{class:"placebox"}),e.createElementVNode("view",{class:"placebox-bottom"}),n.showbox1?(e.openBlock(),e.createElementBlock("image",{key:0,class:"polygon1",src:"/static/smart-chat/polygon.png"})):e.createCommentVNode("",!0),n.showbox2?(e.openBlock(),e.createElementBlock("image",{key:1,class:"polygon2",src:"/static/smart-chat/polygon.png"})):e.createCommentVNode("",!0),n.showbox1?(e.openBlock(),e.createElementBlock("view",{key:2,class:"middlebox1"},[e.createElementVNode("view",{class:"row11"}," Hi，你好，我是你的智能助手 "),e.createElementVNode("view",{class:"row12"},"可能偶尔产生不正确的信息，可能偶尔产生有害的指令，内容仅供参考。"),e.createElementVNode("view",{class:"row13"},"我有点头疼"),e.createElementVNode("view",{class:"row14"},"阿司匹林是治疗什么的？")])):e.createCommentVNode("",!0),n.showbox2?(e.openBlock(),e.createElementBlock("view",{key:3,class:"middlebox2"},[e.createElementVNode("view",{class:"col21"},[e.createElementVNode("image",{class:"row211",src:"/static/smart-chat/archive.png"}),e.createElementVNode("view",{class:"row212"}," 上传医疗报告 ")]),e.createElementVNode("view",{class:"col22"},[e.createElementVNode("image",{class:"row221",src:"/static/smart-chat/info.png"}),e.createElementVNode("view",{class:"row222"}," 完善个人信息 ")])])):e.createCommentVNode("",!0),e.createElementVNode("view",{class:e.normalizeClass([n.showbox?"content-box":"content"])},[e.createVNode(c,{msgList:n.msglist},null,8,["msgList"])],2),n.show_listen?(e.openBlock(),e.createElementBlock("view",{key:4,class:"show-listen"},[e.createElementVNode("text",{class:"listen-title"},"正在听，请说出您的问题"),e.createElementVNode("image",{src:"/static/homepage/sound.gif"})])):e.createCommentVNode("",!0),n.show_listen?(e.openBlock(),e.createElementBlock("view",{key:5,class:"listen-place"})):e.createCommentVNode("",!0)],12,["scroll-top"]),e.createElementVNode("view",{class:"chat-bottom"},[n.type_mode?(e.openBlock(),e.createElementBlock("view",{key:0,class:"send-msg"},[e.createElementVNode("image",{src:"/static/smart-chat/chat-mic.png",class:"send-btn",onClick:o[2]||(o[2]=(...e)=>l.togglemode&&l.togglemode(...e))}),e.createElementVNode("view",{class:"uni-textarea"},[e.withDirectives(e.createElementVNode("textarea",{"onUpdate:modelValue":o[3]||(o[3]=e=>n.chatMsg=e),placeholder:n.placeholder,"placeholder-style":"display:flex; align-items:center; justify-content:center;",onInput:o[4]||(o[4]=(...e)=>l.keyboardInput&&l.keyboardInput(...e)),maxlength:"300","show-confirm-bar":!1,class:"textarea"},null,40,["placeholder"]),[[e.vModelText,n.chatMsg]])]),e.createElementVNode("image",{src:"/static/smart-chat/send.png",class:"send-btn",onClick:o[5]||(o[5]=(...e)=>l.typeSend&&l.typeSend(...e))})])):e.createCommentVNode("",!0),n.speak_mode?(e.openBlock(),e.createElementBlock("view",{key:1,class:"send-msg"},[e.createElementVNode("image",{src:"/static/smart-chat/keyboard.png",class:"send-btn",onClick:o[6]||(o[6]=(...e)=>l.togglemode&&l.togglemode(...e))}),e.createElementVNode("view",{class:"uni-textarea"},[e.createVNode(r,{onTouchstart:l.touchstart,onTouchend:l.touchend},null,8,["onTouchstart","onTouchend"])]),e.createElementVNode("image",{src:"/static/smart-chat/send.png",class:"send-btn",onClick:o[7]||(o[7]=(...e)=>l.scrollTobottom&&l.scrollTobottom(...e))})])):e.createCommentVNode("",!0)])])}]]),w=uni.getRecorderManager(),N=uni.createInnerAudioContext();N.autoplay=!1,N.src="";const V=o({props:{photoUrl:{type:String,default:""}},data:()=>({inputText:"",hasInput:!1,playText:"我很高兴为您解答！你可以在上面手动或语音输入",placeholder:"你可以点击这里输入, 也可以按住下方语音发送",playColor:"#888888",hasPlay:!1}),methods:{micStart(){s("log","at components/tab-chat/tab-chat.vue:46","开始录音"),s("log","at components/tab-chat/tab-chat.vue:47",this.inputText),this.hasPlay=!1,this.placeholder="我正在听...",this.playText="我很高兴为您解答！你可以在上面手动或语音输入",this.playColor="#888888",w.start()},micStop(){const e=getApp().globalData.baseUrl;s("log","at components/tab-chat/tab-chat.vue:56","录音结束"),this.placeholder="识别中...",w.stop();var t=this;w.onStop((function(o){s("log","at components/tab-chat/tab-chat.vue:61",o.tempFilePath),uni.uploadFile({url:e+"/speechtotext",name:"mp3",filePath:o.tempFilePath,formData:{},success:e=>{if(s("log","at components/tab-chat/tab-chat.vue:68","上传成功："+JSON.stringify(e)),200==e.statusCode){const o=JSON.parse(e.data);s("log","at components/tab-chat/tab-chat.vue:72",o.text),t.inputText=o.text,t.placeholder="",t.hasInput=!0,t.sendMsg()}else t.hasPlay=!0,t.playText="发送失败",t.playColor="red"},fail:e=>{s("error","at components/tab-chat/tab-chat.vue:83","上传录音失败："+JSON.stringify(e))}})}))},focus(){this.placeholder=""},blur(){this.placeholder="",""==this.inputText&&(this.placeholder="你可以点击这里输入, 也可以按住下方语音发送")},clearText(){this.hasInput=!1,this.inputText="",this.placeholder="你可以点击这里输入, 也可以按住下方语音发送"},clearPlay(){this.hasPlay=!1,this.playText="我很高兴为您解答！你可以在上面手动或语音输入",this.playColor="#888888"},play(){s("log","at components/tab-chat/tab-chat.vue:107","播放");const e=encodeURI(this.playText);s("log","at components/tab-chat/tab-chat.vue:110",e),N.src="https://tts.baidu.com/text2audio.mp3?lan=ZH&cuid=baike&ctp=1&amp&pdt=301&tex="+e,s("log","at components/tab-chat/tab-chat.vue:112",N.src),N.play(),s("log","at components/tab-chat/tab-chat.vue:114","play over!!!")},send(){this.sendMsg()},sendMsg(){s("log","at components/tab-chat/tab-chat.vue:120",this.inputText,this.photoUrl);const e=getApp().globalData.baseUrl;this.playText="发送中...",this.playColor="#888888",uni.request({url:e+"/chatbot",method:"POST",data:{prompt:this.inputText,image:this.photoUrl},success:e=>{s("log","at components/tab-chat/tab-chat.vue:132",e),this.hasPlay=!0;try{s("log","at components/tab-chat/tab-chat.vue:136",e.data),s("log","at components/tab-chat/tab-chat.vue:138",e.data.response),this.playText=e.data.response,this.playColor="black"}catch(t){this.playText="发送失败！！",this.playColor="red"}},fail:e=>{s("log","at components/tab-chat/tab-chat.vue:147",e),this.playText="发送失败！！",this.playColor="red"}})},textInput(){s("log","at components/tab-chat/tab-chat.vue:154","input...."),""==this.inputText?(this.hasInput=!1,this.placeholder="你可以在上方输入,也可以按住语音发送"):(this.hasInput=!0,this.placeholder="")}}},[["render",function(t,o,a,s,i,n){return e.openBlock(),e.createElementBlock("view",{class:"chat-view"},[e.withDirectives(e.createElementVNode("textarea",{class:"input-text",onInput:o[0]||(o[0]=(...e)=>n.textInput&&n.textInput(...e)),"onUpdate:modelValue":o[1]||(o[1]=e=>i.inputText=e),onFocus:o[2]||(o[2]=(...e)=>n.focus&&n.focus(...e)),onBlur:o[3]||(o[3]=(...e)=>n.blur&&n.blur(...e)),placeholder:i.placeholder,"placeholder-style":"font-size: 36rpx"},null,40,["placeholder"]),[[e.vModelText,i.inputText]]),i.hasInput?(e.openBlock(),e.createElementBlock("div",{key:0,class:"clear",onClick:o[4]||(o[4]=(...e)=>n.clearText&&n.clearText(...e))},"清除内容")):e.createCommentVNode("",!0),i.hasInput?(e.openBlock(),e.createElementBlock("div",{key:1,class:"tap-mic",onClick:o[5]||(o[5]=(...e)=>n.send&&n.send(...e))}," 确认发送 ")):(e.openBlock(),e.createElementBlock("div",{key:2,class:"tap-mic",onTouchstart:o[6]||(o[6]=(...e)=>n.micStart&&n.micStart(...e)),onTouchend:o[7]||(o[7]=(...e)=>n.micStop&&n.micStop(...e))},[e.createElementVNode("image",{src:"/static/recog/mic.png"})],32)),e.createElementVNode("div",{class:"divide"}),e.createElementVNode("div",{class:"show-box",style:e.normalizeStyle({color:`${i.playColor}`})},e.toDisplayString(i.playText),5),i.hasPlay?(e.openBlock(),e.createElementBlock("div",{key:3,class:"clear",onClick:o[8]||(o[8]=(...e)=>n.clearPlay&&n.clearPlay(...e))},"清除内容")):e.createCommentVNode("",!0),e.createElementVNode("div",{class:"tap-mic",onClick:o[9]||(o[9]=(...e)=>n.play&&n.play(...e))}," 点击播放 ")])}],["__scopeId","data-v-373afaf1"]]);const E=o({data:()=>({photoPath:"",heightRatio:1,thumbnail:!1,startData:{clientY:""},moveY:0,state:0,photoUrl:"",backUrl:"",baseUrl:"",token:""}),onLoad(e){this.token=getApp().getToken(),this.backUrl=getApp().globalData.backUrl,this.baseUrl=getApp().globalData.baseUrl;const t=this.getOpenerEventChannel();t.on("recieveFile",(e=>{this.photoPath=e.filepath,this.$refs.image.src=e.filepath})),t.on("recieveFile",(e=>{uni.compressImage({src:e.filepath,quality:80,success:e=>{s("log","at pages/photo-recog/photo-recog.vue:70",e.tempFilePath),this.uploadFile(e.tempFilePath)}})}))},methods:{uploadFile(e){s("log","at pages/photo-recog/photo-recog.vue:78",this.backUrl+"/storage/api/v1/uploadImg/photo"),s("log","at pages/photo-recog/photo-recog.vue:79",this.token),uni.uploadFile({url:this.backUrl+"/storage/api/v1/uploadImg/photo",name:"multipartFile",filePath:e,formData:{},header:{token:this.token},success:e=>{s("log","at pages/photo-recog/photo-recog.vue:89","上传成功："+JSON.stringify(e));try{const t=JSON.parse(e.data);s("log","at pages/photo-recog/photo-recog.vue:93",t.data.image),this.photoUrl=t.data.image}catch(t){s("error","at pages/photo-recog/photo-recog.vue:96",t),uni.showToast({title:"图片上传失败，请检查网络"})}},fail:e=>{s("error","at pages/photo-recog/photo-recog.vue:103",e),uni.showToast({title:"图片上传失败，请检查网络"})}})},back(){this.thumbnail?this.thumbnail=!1:uni.navigateBack()},showThumb(){this.thumbnail=!0,this.moveY=0,this.state=0},start(e){this.startData.clientY=e.changedTouches[0].clientY},end(e){s("log","at pages/photo-recog/photo-recog.vue:127","this.moveY = ",this.touch.clientY-this.startData.clientY),this.touch.clientY-this.startData.clientY>300?(this.state=1,this.moveY=350,this.thumbnail=!1):(this.state=0,this.moveY=0)},move(e){let t=e.touches[0];this.touch=t;let o=0;t.clientY>this.startData.clientY&&0===this.state&&(o=t.clientY-this.startData.clientY,o>1e3&&(o=1e3),this.moveY=o),t.clientY<this.startData.clientY&&1===this.state&&(o=this.startData.clientY-t.clientY,o>1e3&&(o=-1e3),this.moveY=350-o)}}},[["render",function(t,o,a,s,n,l){const c=i(e.resolveDynamicComponent("tab-chat"),V);return e.openBlock(),e.createElementBlock("view",{class:"root-view"},[e.createElementVNode("image",{class:"back-icon",src:"/static/recog/back-icon.png",onClick:o[0]||(o[0]=(...e)=>l.back&&l.back(...e))}),e.createElementVNode("view",{class:"recog-view"},[e.createElementVNode("image",{class:e.normalizeClass([n.thumbnail?"preview-img-thumb":"preview-img"]),src:n.photoPath,ref:"image"},null,10,["src"]),e.createElementVNode("view",{class:"menu"},[e.createElementVNode("navigator",{class:"row",url:"/pages/photo-recog/photo_nvue"},[e.createElementVNode("image",{src:"/static/recog/back.png",class:"row-side"}),e.createElementVNode("text",{class:"row-text"}," 返回 ")]),e.createElementVNode("view",{class:"row",onClick:o[1]||(o[1]=(...e)=>l.showThumb&&l.showThumb(...e))},[e.createElementVNode("image",{src:"/static/recog/ok.png",class:"row-middle"})]),e.createElementVNode("view",{class:"row",url:"/pages/photo-recog/photo_nvue"},[e.createElementVNode("image",{src:"/static/recog/rotate.png",class:"row-side"}),e.createElementVNode("text",{class:"row-text"}," 旋转 ")])])]),n.thumbnail?(e.openBlock(),e.createBlock(c,{key:0,class:"showMore-box",style:e.normalizeStyle({transform:"translateY("+n.moveY+"px)"}),onTouchstart:l.start,onTouchend:l.end,onTouchmove:l.move,photoUrl:n.photoUrl},null,8,["style","onTouchstart","onTouchend","onTouchmove","photoUrl"])):e.createCommentVNode("",!0)])}],["__scopeId","data-v-9221cfce"]]),x=uni.createInnerAudioContext();x.autoplay=!1,x.src="";const C=o({props:{recogText:{type:String,default:""}},data:()=>({speed:5,playHint:"正常"}),methods:{goHome(){uni.navigateTo({url:"/pages/index/index"})},play(){s("log","at components/tab-recog/tab-recog.vue:42","播放"+this.recogText);const e=encodeURI(this.recogText);s("log","at components/tab-recog/tab-recog.vue:45",e),x.src="https://tts.baidu.com/text2audio.mp3?lan=ZH&cuid=baike\n\t\t\t\t&spd="+this.speed+"&ctp=1&amp&pdt=301&tex="+e,s("log","at components/tab-recog/tab-recog.vue:48",x.src),x.play(),s("log","at components/tab-recog/tab-recog.vue:50","play over!!!")},toggle(){switch(this.speed){case 3:this.speed=5,this.playHint="正常";break;case 5:this.speed=8,this.playHint="倍速";break;case 8:this.speed=3,this.playHint="慢速"}}}},[["render",function(t,o,a,s,i,n){return e.openBlock(),e.createElementBlock("view",{class:"tab-view"},[e.createElementVNode("scroll-view",{class:"show-box",style:{},"scroll-y":"true"},e.toDisplayString(a.recogText),1),e.createElementVNode("view",{class:"menu"},[e.createElementVNode("view",{class:"first-row"},[e.createElementVNode("image",{src:"/static/read/start.png",class:"start-play",onClick:o[0]||(o[0]=(...e)=>n.play&&n.play(...e))}),e.createElementVNode("view",{class:"mult-play",onClick:o[1]||(o[1]=(...e)=>n.toggle&&n.toggle(...e))},e.toDisplayString(i.playHint),1)]),e.createElementVNode("view",{class:"second-row"},[e.createElementVNode("image",{src:"/static/recog/home.png",onClick:o[2]||(o[2]=(...e)=>n.goHome&&n.goHome(...e))}),e.createElementVNode("navigator",{class:"once-again",url:"/pages/assist-read/photo_nvue"},"再拍一张")])])])}],["__scopeId","data-v-ad8d90f1"]]);const T=o({data:()=>({photoPath:"",heightRatio:1,thumbnail:!1,startData:{clientY:""},moveY:0,state:0,recogText:"",backUrl:"",baseUrl:"",token:""}),onLoad(e){this.token=getApp().getToken(),this.backUrl=getApp().globalData.backUrl,this.baseUrl=getApp().globalData.baseUrl;const t=this.getOpenerEventChannel();this.recogText="",t.on("recieveFile",(e=>{this.photoPath=e.filepath,this.$refs.image.src=e.filepath})),t.on("recieveFile",(e=>{uni.uploadFile({url:this.backUrl+"/storage/api/v1/uploadImg/read",name:"multipartFile",filePath:e.filepath,formData:{},header:{token:this.token},success:e=>{s("log","at pages/assist-read/photo-recog.vue:77","上传成功："+JSON.stringify(e));try{const t=JSON.parse(e.data);s("log","at pages/assist-read/photo-recog.vue:81",t.data.image),this.photoUrl=t.data.image,this.handleImg()}catch(t){s("error","at pages/assist-read/photo-recog.vue:86",t),uni.showToast({title:"图片上传失败，请检查网络"})}},fail:e=>{s("error","at pages/assist-read/photo-recog.vue:93",e),uni.showToast({title:"图片上传失败，请检查网络"})}})}))},methods:{back(){this.thumbnail?this.thumbnail=!1:uni.navigateBack()},handleImg(){var e=this;s("log","at pages/assist-read/photo-recog.vue:111","photoUrl: "+this.photoUrl),uni.request({url:this.baseUrl+"/ocr",method:"POST",data:{image:this.photoUrl},success:t=>{s("log","at pages/assist-read/photo-recog.vue:119",t);try{const o=t.data.join("\n");e.recogText=o,s("log","at pages/assist-read/photo-recog.vue:123",this.recogText)}catch(o){e.recogText="发送失败"}},fail:t=>{e.recogText="发送失败"}})},showThumb(){this.thumbnail=!0,this.moveY=0,this.state=0},start(e){this.startData.clientY=e.changedTouches[0].clientY},end(e){s("log","at pages/assist-read/photo-recog.vue:142",this.recogText),s("log","at pages/assist-read/photo-recog.vue:143","this.moveY = ",this.touch.clientY-this.startData.clientY),this.touch.clientY-this.startData.clientY>300?(this.state=1,this.moveY=350,this.thumbnail=!1):(this.state=0,this.moveY=0)},move(e){let t=e.touches[0];this.touch=t;let o=0;t.clientY>this.startData.clientY&&0===this.state&&(o=t.clientY-this.startData.clientY,o>1e3&&(o=1e3),this.moveY=o),t.clientY<this.startData.clientY&&1===this.state&&(o=this.startData.clientY-t.clientY,o>1e3&&(o=-1e3),this.moveY=350-o)}}},[["render",function(t,o,a,s,n,l){const c=i(e.resolveDynamicComponent("tab-recog"),C);return e.openBlock(),e.createElementBlock("view",{class:"root-view"},[e.createElementVNode("image",{class:"back-icon",src:"/static/recog/back-icon.png",onClick:o[0]||(o[0]=(...e)=>l.back&&l.back(...e))}),e.createElementVNode("view",{class:"recog-view"},[e.createElementVNode("image",{class:e.normalizeClass([n.thumbnail?"preview-img-thumb":"preview-img"]),src:n.photoPath,ref:"image"},null,10,["src"]),e.createElementVNode("view",{class:"menu"},[e.createElementVNode("navigator",{class:"row",url:"/pages/photo-recog/photo_nvue"},[e.createElementVNode("image",{src:"/static/recog/back.png",class:"row-side"}),e.createElementVNode("text",{class:"row-text"}," 返回 ")]),e.createElementVNode("view",{class:"row",onClick:o[1]||(o[1]=(...e)=>l.showThumb&&l.showThumb(...e))},[e.createElementVNode("image",{src:"/static/recog/ok.png",class:"row-middle"})]),e.createElementVNode("view",{class:"row",url:"/pages/photo-recog/photo_nvue"},[e.createElementVNode("image",{src:"/static/recog/rotate.png",class:"row-side"}),e.createElementVNode("text",{class:"row-text"}," 旋转 ")])])]),n.thumbnail?(e.openBlock(),e.createBlock(c,{key:0,class:"showMore-box",style:e.normalizeStyle({transform:"translateY("+n.moveY+"px)"}),onTouchstart:l.start,onTouchend:l.end,onTouchmove:l.move,recogText:n.recogText},null,8,["style","onTouchstart","onTouchend","onTouchmove","recogText"])):e.createCommentVNode("",!0)])}],["__scopeId","data-v-38ec97f8"]]);const B=o({data:()=>({gender:!1,avatar:"",age:0,nickname:"",backUrl:"",baseUrl:"",token:""}),onLoad(){this.token=getApp().getToken(),this.backUrl=getApp().globalData.backUrl,this.baseUrl=getApp().globalData.baseUrl,uni.request({url:this.backUrl+"/user/api/v1",method:"GET",header:{token:this.token},success:e=>{s("log","at pages/personal/personal.vue:75",e.data.data);const t=e.data.data;this.date=t.birthday;const o=new Date,a=parseInt(this.date.slice(0,4));this.age=o.getFullYear()-a,this.nickname=t.nickname,null==t.imageUri?this.avatar="/static/personal/girl.png":this.avatar=t.imageUri,"男"==t.gender?this.gender=!0:"女"==t.gender&&(this.gender=!1)}})}},[["render",function(t,o,a,s,n,l){const c=i(e.resolveDynamicComponent("home-foot"),d);return e.openBlock(),e.createElementBlock("view",{class:"personal"},[e.createElementVNode("view",{class:"content"},[e.createElementVNode("view",{class:"home-head"},[e.createElementVNode("view",{class:"head-left"},[e.createElementVNode("image",{class:"home-icon",src:n.avatar},null,8,["src"]),e.createElementVNode("view",{class:"head-info"},[e.createElementVNode("text",{class:"home-title"},e.toDisplayString(n.nickname),1),n.gender?(e.openBlock(),e.createElementBlock("text",{key:0,class:"info-text"},[e.createElementVNode("span",{style:{color:"#1fa6ea"}},"♂"),e.createTextVNode(" 男 "+e.toDisplayString(n.age+"岁"),1)])):(e.openBlock(),e.createElementBlock("text",{key:1,class:"info-text"},[e.createElementVNode("span",{style:{color:"#F49ED9"}},"♀"),e.createTextVNode(" 女 "+e.toDisplayString(n.age+"岁"),1)]))])]),e.createElementVNode("navigator",{class:"edit-button",url:"/pages/personal/profile/profile"}," 编辑资料 ")]),e.createElementVNode("view",{class:"service"},[e.createElementVNode("view",{class:"content-title"},"推荐服务"),e.createElementVNode("view",{class:"service-container"},[e.createElementVNode("view",{class:"service-box"},"健康助手"),e.createElementVNode("view",{class:"service-box"},"智能出行"),e.createElementVNode("view",{class:"service-box"},"辅助阅读")])]),e.createElementVNode("view",{class:"more-funcs"},[e.createElementVNode("view",{class:"content-title"},"更多功能"),e.createElementVNode("view",{class:"funcs-container"},[e.createElementVNode("view",{class:"service-box"},[e.createElementVNode("image",{class:"item1",src:"/static/personal/help.png"}),e.createElementVNode("text",{class:"item2"},"获取帮助"),e.createElementVNode("image",{class:"item3",src:"/static/personal/more1.png"})]),e.createElementVNode("view",{class:"service-box"},[e.createElementVNode("image",{class:"item1",src:"/static/personal/about.png"}),e.createElementVNode("text",{class:"item2"},"关于明道"),e.createElementVNode("image",{class:"item3",src:"/static/personal/more1.png"})]),e.createElementVNode("navigator",{class:"service-box",url:"/pages/personal/system/system"},[e.createElementVNode("image",{class:"item1",src:"/static/personal/setting.png"}),e.createElementVNode("text",{class:"item2"},"系统设置"),e.createElementVNode("image",{class:"item3",src:"/static/personal/more1.png"})])])])]),e.createVNode(c,{pageType:!1})])}]]),S={data:()=>({}),created(){this.popup=this.getParent()},methods:{getParent(e="uniPopup"){let t=this.$parent,o=t.$options.name;for(;o!==e;){if(t=t.$parent,!t)return!1;o=t.$options.name}return t}}},_=["{","}"];const D=/^(?:\d)+/,P=/^(?:\w)+/;const I="zh-Hans",A="zh-Hant",U="en",Y=Object.prototype.hasOwnProperty,$=(e,t)=>Y.call(e,t),M=new class{constructor(){this._caches=Object.create(null)}interpolate(e,t,o=_){if(!t)return[e];let a=this._caches[e];return a||(a=function(e,[t,o]){const a=[];let s=0,i="";for(;s<e.length;){let n=e[s++];if(n===t){i&&a.push({type:"text",value:i}),i="";let t="";for(n=e[s++];void 0!==n&&n!==o;)t+=n,n=e[s++];const l=n===o,c=D.test(t)?"list":l&&P.test(t)?"named":"unknown";a.push({value:t,type:c})}else i+=n}return i&&a.push({type:"text",value:i}),a}(e,o),this._caches[e]=a),function(e,t){const o=[];let a=0;const s=Array.isArray(t)?"list":(i=t,null!==i&&"object"==typeof i?"named":"unknown");var i;if("unknown"===s)return o;for(;a<e.length;){const i=e[a];switch(i.type){case"text":o.push(i.value);break;case"list":o.push(t[parseInt(i.value,10)]);break;case"named":"named"===s&&o.push(t[i.value])}a++}return o}(a,t)}};function L(e,t){if(!e)return;if(e=e.trim().replace(/_/g,"-"),t&&t[e])return e;if("chinese"===(e=e.toLowerCase()))return I;if(0===e.indexOf("zh"))return e.indexOf("-hans")>-1?I:e.indexOf("-hant")>-1?A:(o=e,["-tw","-hk","-mo","-cht"].find((e=>-1!==o.indexOf(e)))?A:I);var o;let a=[U,"fr","es"];t&&Object.keys(t).length>0&&(a=Object.keys(t));const s=function(e,t){return t.find((t=>0===e.indexOf(t)))}(e,a);return s||void 0}class O{constructor({locale:e,fallbackLocale:t,messages:o,watcher:a,formater:s}){this.locale=U,this.fallbackLocale=U,this.message={},this.messages={},this.watchers=[],t&&(this.fallbackLocale=t),this.formater=s||M,this.messages=o||{},this.setLocale(e||U),a&&this.watchLocale(a)}setLocale(e){const t=this.locale;this.locale=L(e,this.messages)||this.fallbackLocale,this.messages[this.locale]||(this.messages[this.locale]={}),this.message=this.messages[this.locale],t!==this.locale&&this.watchers.forEach((e=>{e(this.locale,t)}))}getLocale(){return this.locale}watchLocale(e){const t=this.watchers.push(e)-1;return()=>{this.watchers.splice(t,1)}}add(e,t,o=!0){const a=this.messages[e];a?o?Object.assign(a,t):Object.keys(t).forEach((e=>{$(a,e)||(a[e]=t[e])})):this.messages[e]=t}f(e,t,o){return this.formater.interpolate(e,t,o).join("")}t(e,t,o){let a=this.message;return"string"==typeof t?(t=L(t,this.messages))&&(a=this.messages[t]):o=t,$(a,e)?this.formater.interpolate(a[e],o).join(""):(console.warn(`Cannot translate the value of keypath ${e}. Use the value of keypath as default.`),e)}}const R={en:{"uni-popup.cancel":"cancel","uni-popup.ok":"ok","uni-popup.placeholder":"pleace enter","uni-popup.title":"Hint","uni-popup.shareTitle":"Share to"},"zh-Hans":{"uni-popup.cancel":"取消","uni-popup.ok":"确定","uni-popup.placeholder":"请输入","uni-popup.title":"提示","uni-popup.shareTitle":"分享到"},"zh-Hant":{"uni-popup.cancel":"取消","uni-popup.ok":"確定","uni-popup.placeholder":"請輸入","uni-popup.title":"提示","uni-popup.shareTitle":"分享到"}},{t:H}=function(e,t={},o,a){"string"!=typeof e&&([e,t]=[t,e]),"string"!=typeof e&&(e="undefined"!=typeof uni&&uni.getLocale?uni.getLocale():"undefined"!=typeof global&&global.getLocale?global.getLocale():U),"string"!=typeof o&&(o="undefined"!=typeof __uniConfig&&__uniConfig.fallbackLocale||U);const s=new O({locale:e,fallbackLocale:o,messages:t,watcher:a});let i=(e,t)=>{if("function"!=typeof getApp)i=function(e,t){return s.t(e,t)};else{let e=!1;i=function(t,o){const a=getApp().$vm;return a&&(a.$locale,e||(e=!0,function(e,t){e.$watchLocale?e.$watchLocale((e=>{t.setLocale(e)})):e.$watch((()=>e.$locale),(e=>{t.setLocale(e)}))}(a,s))),s.t(t,o)}}return i(e,t)};return{i18n:s,f:(e,t,o)=>s.f(e,t,o),t:(e,t)=>i(e,t),add:(e,t,o=!0)=>s.add(e,t,o),watch:e=>s.watchLocale(e),getLocale:()=>s.getLocale(),setLocale:e=>s.setLocale(e)}}(R);const F=o({name:"uniPopupDialog",mixins:[S],emits:["confirm","close","update:modelValue","input"],props:{inputType:{type:String,default:"text"},showClose:{type:Boolean,default:!0},modelValue:{type:[Number,String],default:""},placeholder:{type:[String,Number],default:""},type:{type:String,default:"error"},mode:{type:String,default:"base"},title:{type:String,default:""},content:{type:String,default:""},beforeClose:{type:Boolean,default:!1},cancelText:{type:String,default:""},confirmText:{type:String,default:""},maxlength:{type:Number,default:-1},focus:{type:Boolean,default:!0}},data:()=>({dialogType:"error",val:""}),computed:{okText(){return this.confirmText||H("uni-popup.ok")},closeText(){return this.cancelText||H("uni-popup.cancel")},placeholderText(){return this.placeholder||H("uni-popup.placeholder")},titleText(){return this.title||H("uni-popup.title")}},watch:{type(e){this.dialogType=e},mode(e){"input"===e&&(this.dialogType="info")},value(e){-1!=this.maxlength&&"input"===this.mode?this.val=e.slice(0,this.maxlength):this.val=e},val(e){this.$emit("update:modelValue",e)}},created(){this.popup.disableMask(),"input"===this.mode?(this.dialogType="info",this.val=this.value,this.val=this.modelValue):this.dialogType=this.type},methods:{onOk(){"input"===this.mode?this.$emit("confirm",this.val):this.$emit("confirm"),this.beforeClose||this.popup.close()},closeDialog(){this.$emit("close"),this.beforeClose||this.popup.close()},close(){this.popup.close()}}},[["render",function(t,o,a,s,i,n){return e.openBlock(),e.createElementBlock("view",{class:"uni-popup-dialog"},[e.createElementVNode("view",{class:"uni-dialog-title"},[e.createElementVNode("text",{class:e.normalizeClass(["uni-dialog-title-text",["uni-popup__"+i.dialogType]])},e.toDisplayString(n.titleText),3)]),"base"===a.mode?(e.openBlock(),e.createElementBlock("view",{key:0,class:"uni-dialog-content"},[e.renderSlot(t.$slots,"default",{},(()=>[e.createElementVNode("text",{class:"uni-dialog-content-text"},e.toDisplayString(a.content),1)]),!0)])):(e.openBlock(),e.createElementBlock("view",{key:1,class:"uni-dialog-content"},[e.renderSlot(t.$slots,"default",{},(()=>[e.withDirectives(e.createElementVNode("input",{class:"uni-dialog-input",maxlength:a.maxlength,"onUpdate:modelValue":o[0]||(o[0]=e=>i.val=e),type:a.inputType,placeholder:n.placeholderText,focus:a.focus},null,8,["maxlength","type","placeholder","focus"]),[[e.vModelDynamic,i.val]])]),!0)])),e.createElementVNode("view",{class:"uni-dialog-button-group"},[a.showClose?(e.openBlock(),e.createElementBlock("view",{key:0,class:"uni-dialog-button",onClick:o[1]||(o[1]=(...e)=>n.closeDialog&&n.closeDialog(...e))},[e.createElementVNode("text",{class:"uni-dialog-button-text"},e.toDisplayString(n.closeText),1)])):e.createCommentVNode("",!0),e.createElementVNode("view",{class:e.normalizeClass(["uni-dialog-button",a.showClose?"uni-border-left":""]),onClick:o[2]||(o[2]=(...e)=>n.onOk&&n.onOk(...e))},[e.createElementVNode("text",{class:"uni-dialog-button-text uni-button-color"},e.toDisplayString(n.okText),1)],2)])])}],["__scopeId","data-v-dc2a088f"]]);const z=o({data(){return{date:this.getDate({format:!0}),array:["男","女"],index:0,genderSet:!1,height:0,weight:0,nickname:"",avatar:""}},onLoad(){const e=getApp().getToken();uni.request({url:"http://82.157.124.83:51603/user/api/v1",method:"GET",header:{token:e},success:e=>{s("log","at pages/personal/profile/profile.vue:100",e);const t=e.data.data;this.date=t.birthday,this.height=t.height,this.weight=t.weight,this.genderSet=!0,"男"==t.gender?this.index=0:"女"==t.gender&&(this.index=1),this.nickname=t.nickname,null==t.imageUri?this.avatar="/static/personal/girl.png":this.avatar=t.imageUri}})},computed:{startDate(){return this.getDate("start")},endDate(){return this.getDate("end")}},methods:{bindPickerChange:function(e){s("log","at pages/personal/profile/profile.vue:132","picker发送选择改变，携带值为",e.detail.value),this.index=e.detail.value,this.genderSet=!0},bindDateChange:function(e){this.date=e.detail.value},getDate(e){const t=new Date;let o=t.getFullYear(),a=t.getMonth()+1,s=t.getDate();return"start"===e&&(o-=100),a=a>9?a:"0"+a,s=s>9?s:"0"+s,`${o}-${a}-${s}`},nameChange(){this.$refs["popup-name"].open()},heightChange(){this.$refs["popup-height"].open()},weightChange(){this.$refs["popup-weight"].open()},save(){const e=getApp().getToken();uni.request({url:"http://82.157.124.83:51603/user/api/v1",method:"PUT",data:{birthday:this.date,city:"成都",gender:this.array[this.index],height:this.height,nickname:this.nickname,weight:this.weight},header:{token:e},success(){uni.showToast({title:"保存成功",duration:2e3})}})},changeAvatar(){const e=getApp().getToken();uni.chooseImage({count:1,sourceType:["album"],success:t=>{s("log","at pages/personal/profile/profile.vue:192","chosed"+t.tempFilePaths);let o=t.tempFilePaths;uni.uploadFile({url:"http://82.157.124.83:51603/user/api/v1/uploadPicture",header:{token:e},filePath:o[0],name:"multipartFile",success:e=>{let t=JSON.parse(e.data);s("log","at pages/personal/profile/profile.vue:203",t),200==t.code&&(s("log","at pages/personal/profile/profile.vue:205",t.data.imageUri),this.avatar=t.data.imageUri)},fail:e=>{s("log","at pages/personal/profile/profile.vue:210",e)}})}})}}},[["render",function(t,o,a,s,n,l){const c=i(e.resolveDynamicComponent("uni-popup-dialog"),F),r=i(e.resolveDynamicComponent("uni-popup"),h);return e.openBlock(),e.createElementBlock("view",{class:"profile"},[e.createElementVNode("view",{class:"item-high"},[e.createElementVNode("view",{class:"item-left"},"更改头像"),e.createElementVNode("image",{class:"avatar",src:n.avatar,onClick:o[0]||(o[0]=(...e)=>l.changeAvatar&&l.changeAvatar(...e))},null,8,["src"])]),e.createElementVNode("view",{class:"line"}),e.createElementVNode("view",{class:"item"},[e.createElementVNode("view",{class:"item-left"},"昵称"),e.createElementVNode("view",{class:"item-right",onClick:o[1]||(o[1]=(...e)=>l.nameChange&&l.nameChange(...e))},[e.createElementVNode("text",{class:"text-right"},e.toDisplayString(""==n.nickname?"未填写":n.nickname),1),e.createElementVNode("image",{class:"icon-right",src:"/static/personal/more1.png"})])]),e.createElementVNode("view",{class:"line"}),e.createElementVNode("view",{class:"item"},[e.createElementVNode("view",{class:"item-left"},"性别"),e.createElementVNode("picker",{onChange:o[2]||(o[2]=(...e)=>l.bindPickerChange&&l.bindPickerChange(...e)),value:n.index,range:n.array},[e.createElementVNode("view",{class:"item-right"},[e.createElementVNode("text",{class:"text-right"},e.toDisplayString(n.genderSet?n.array[n.index]:"未填写"),1),e.createElementVNode("image",{class:"icon-right",src:"/static/personal/more1.png"})])],40,["value","range"])]),e.createElementVNode("view",{class:"line"}),e.createElementVNode("view",{class:"item"},[e.createElementVNode("view",{class:"item-left"},"生日"),e.createElementVNode("picker",{mode:"date",value:n.date,start:l.startDate,end:l.endDate,onChange:o[3]||(o[3]=(...e)=>l.bindDateChange&&l.bindDateChange(...e))},[e.createElementVNode("view",{class:"item-right"},[e.createElementVNode("view",{class:"text-right"},e.toDisplayString(n.date),1),e.createElementVNode("image",{class:"icon-right",src:"/static/personal/more1.png"})])],40,["value","start","end"])]),e.createElementVNode("view",{class:"line"}),e.createElementVNode("view",{class:"item"},[e.createElementVNode("view",{class:"item-left"},"身高"),e.createElementVNode("view",{class:"item-right",onClick:o[4]||(o[4]=(...e)=>l.heightChange&&l.heightChange(...e))},[e.createElementVNode("view",{class:"text-right"},e.toDisplayString(0==n.height?"未填写":n.height+"cm"),1),e.createElementVNode("image",{class:"icon-right",src:"/static/personal/more1.png"})])]),e.createElementVNode("view",{class:"line"}),e.createElementVNode("view",{class:"item"},[e.createElementVNode("view",{class:"item-left"},"体重"),e.createElementVNode("view",{class:"item-right",onClick:o[5]||(o[5]=(...e)=>l.weightChange&&l.weightChange(...e))},[e.createElementVNode("view",{class:"text-right"},e.toDisplayString(0==n.weight?"未填写":n.weight+"kg"),1),e.createElementVNode("image",{class:"icon-right",src:"/static/personal/more1.png"})])]),e.createElementVNode("view",{class:"line"}),e.createVNode(r,{ref:"popup-name",type:"dialog"},{default:e.withCtx((()=>[e.createVNode(c,{mode:"input",title:"输入你的名字",modelValue:n.nickname,"onUpdate:modelValue":o[6]||(o[6]=e=>n.nickname=e),placeholder:"请在此输入"},null,8,["modelValue"])])),_:1},512),e.createVNode(r,{ref:"popup-height",type:"dialog"},{default:e.withCtx((()=>[e.createVNode(c,{mode:"input",title:"输入你的体重(公斤)",modelValue:n.height,"onUpdate:modelValue":o[7]||(o[7]=e=>n.height=e),placeholder:"请在此输入"},null,8,["modelValue"])])),_:1},512),e.createVNode(r,{ref:"popup-weight",type:"dialog"},{default:e.withCtx((()=>[e.createVNode(c,{mode:"input",title:"输入你的身高(厘米)",modelValue:n.weight,"onUpdate:modelValue":o[8]||(o[8]=e=>n.weight=e),placeholder:"请在此输入"},null,8,["modelValue"])])),_:1},512),e.createElementVNode("view",{class:"save-btn",onClick:o[9]||(o[9]=(...e)=>l.save&&l.save(...e))},"保存")])}],["__scopeId","data-v-c2f86429"]]);const j=o({data:()=>({}),methods:{logout(){uni.removeStorageSync("token"),uni.redirectTo({url:"/pages/login/login"})}}},[["render",function(t,o,a,s,i,n){return e.openBlock(),e.createElementBlock("view",{class:"system"},[e.createElementVNode("view",{class:"item"},[e.createElementVNode("view",{class:"item-left"}," 个人资料 "),e.createElementVNode("image",{class:"icon-right",src:"/static/personal/more1.png"})]),e.createElementVNode("view",{class:"line"}),e.createElementVNode("view",{class:"item"},[e.createElementVNode("view",{class:"item-left"}," 账号设置 "),e.createElementVNode("image",{class:"icon-right",src:"/static/personal/more1.png"})]),e.createElementVNode("view",{class:"line"}),e.createElementVNode("view",{class:"item"},[e.createElementVNode("view",{class:"item-left"},[e.createTextVNode(" 消息推送 "),e.createElementVNode("view",{class:"item-middle"}," 已关闭 ")]),e.createElementVNode("view",{class:"item-right"}," 去设置 ")]),e.createElementVNode("view",{class:"line"}),e.createElementVNode("view",{class:"item"},[e.createElementVNode("view",{class:"item-left"}," 清理缓存 "),e.createElementVNode("view",{class:"item-right"}," 清理 ")]),e.createElementVNode("view",{class:"line"}),e.createElementVNode("view",{class:"item"},[e.createElementVNode("view",{class:"item-left",onClick:o[0]||(o[0]=(...e)=>n.logout&&n.logout(...e))}," 退出登录 "),e.createElementVNode("image",{class:"icon-right",src:"/static/personal/more1.png"})]),e.createElementVNode("view",{class:"line"})])}],["__scopeId","data-v-5f4f1224"]]);const J=o({data:()=>({}),methods:{}},[["render",function(t,o,a,s,i,n){return e.openBlock(),e.createElementBlock("view",{class:"account"},[e.createElementVNode("view",{class:"phone"}),e.createElementVNode("view",{class:"subtitle"},"第三方账号"),e.createElementVNode("view",{class:"app"})])}]]),q=uni.getRecorderManager(),Z=uni.createInnerAudioContext();Z.autoplay=!0;const X=o({data:()=>({text:"uni-app",voicePath:""}),onLoad(){},methods:{startRecord(){s("log","at pages/test/test-record/test-record.vue:26","开始录音"),q.start()},endRecord(){var e=this;s("log","at pages/test/test-record/test-record.vue:32","录音结束"),q.stop(),q.onStop((function(t){e.voicePath=t.tempFilePath,uni.showToast({title:e.voicePath})}))},playVoice(){s("log","at pages/test/test-record/test-record.vue:42","播放录音"),this.voicePath&&(Z.src=this.voicePath,Z.play())}}},[["render",function(t,o,a,s,i,n){return e.openBlock(),e.createElementBlock("view",null,[e.createElementVNode("button",{onClick:o[0]||(o[0]=(...e)=>n.startRecord&&n.startRecord(...e))},"开始录音"),e.createElementVNode("button",{onClick:o[1]||(o[1]=(...e)=>n.endRecord&&n.endRecord(...e))},"停止录音"),e.createElementVNode("button",{onClick:o[2]||(o[2]=(...e)=>n.playVoice&&n.playVoice(...e))},"播放录音")])}]]);const G=o({data:()=>({})},[["render",function(t,o,a,s,i,n){return e.openBlock(),e.createElementBlock("view",{class:"login"},[e.createElementVNode("view",{class:"head1"},[e.createElementVNode("image",{class:"home-icon",src:"/static/login/icon.png"}),e.createElementVNode("image",{class:"title",src:"/static/login/title.png"})]),e.createElementVNode("image",{class:"head2",src:"/static/login/subtitle.png"}),e.createElementVNode("navigator",{class:"option",url:"/pages/login/easy-login/easy-login"}," 快捷登录 "),e.createElementVNode("navigator",{class:"option",url:"/pages/login/verify-login/verify-login"}," 验证码登录 "),e.createElementVNode("view",{style:{height:"100rpx"}})])}],["__scopeId","data-v-e76d3c4b"]]);const W=o({data:()=>({state:!1,phoneNumber:"",verifyCode:""}),methods:{checkboxChange(e){this.state=!this.state,s("log","at pages/login/verify-login/verify-login.vue:50",this.state)},getVeriCode(){const e=getApp().globalData.backUrl+"/user/api/v1/sendCode";s("log","at pages/login/verify-login/verify-login.vue:55","url: "+e),s("log","at pages/login/verify-login/verify-login.vue:56","phoneNumber: "+this.phoneNumber),uni.request({url:e,method:"POST",data:{phone:this.phoneNumber},success:e=>{s("log","at pages/login/verify-login/verify-login.vue:64",e.data),this.text="request success"},fail(e){s("log","at pages/login/verify-login/verify-login.vue:68",e)}})},login(){const e=getApp().globalData.backUrl;s("log","at pages/login/verify-login/verify-login.vue:75","phoneNumber: "+this.verifyCode),uni.request({url:e+"/user/api/v1/login",method:"POST",data:{phone:this.phoneNumber,code:this.verifyCode},success:e=>{s("log","at pages/login/verify-login/verify-login.vue:84",e.data),this.text="request success",getApp().setToken(e.data.data.token,3600),s("log","at pages/login/verify-login/verify-login.vue:88",e.data.data.token),uni.navigateTo({url:"/pages/index/index",success(){s("log","at pages/login/verify-login/verify-login.vue:92",getApp().getToken())}})},fail(e){s("log","at pages/login/verify-login/verify-login.vue:97",e)}})}}},[["render",function(t,o,a,s,i,n){return e.openBlock(),e.createElementBlock("view",{class:"login"},[e.createElementVNode("view",{class:"head1"},[e.createElementVNode("image",{src:"/static/login/icon.png",style:{height:"102rpx",width:"110rpx"}}),e.createElementVNode("image",{class:"title",src:"/static/login/title.png"})]),e.createElementVNode("image",{class:"head2",src:"/static/login/subtitle.png"}),e.createElementVNode("view",{class:"logbox"},[e.createElementVNode("view",{class:"subtitle"},"短信验证码登录"),e.createElementVNode("view",{class:"hint"},"未注册的手机号验证后将自动登录"),e.withDirectives(e.createElementVNode("input",{class:"input1",placeholder:"请输入手机号码","onUpdate:modelValue":o[0]||(o[0]=e=>i.phoneNumber=e),"placeholder-style":"font-size: 30rpx; color: rgba(0, 0, 0, 0.26);"},null,512),[[e.vModelText,i.phoneNumber]]),e.withDirectives(e.createElementVNode("input",{class:"input2",placeholder:"请输入验证码","onUpdate:modelValue":o[1]||(o[1]=e=>i.verifyCode=e),"placeholder-style":"font-size: 30rpx; color: rgba(0, 0, 0, 0.26);"},null,512),[[e.vModelText,i.verifyCode]]),e.createElementVNode("text",{class:"verify-button",onClick:o[2]||(o[2]=(...e)=>n.getVeriCode&&n.getVeriCode(...e))}," 获取验证码 "),e.createElementVNode("view",{class:"login-button",checked:t.checked,onClick:o[3]||(o[3]=(...e)=>n.login&&n.login(...e))}," 登录 ",8,["checked"]),e.createElementVNode("checkbox-group",{onChange:o[4]||(o[4]=(...e)=>n.checkboxChange&&n.checkboxChange(...e)),class:"agreement"},[e.createElementVNode("label",null,[e.createElementVNode("checkbox",{class:"checkbox",checked:i.state,style:{transform:"scale(0.7)","border-radius":"50%"}},null,8,["checked"]),e.createTextVNode(" 我已阅读并同意"),e.createElementVNode("a",{style:{color:"#3ab0de"}},"《用户服务协议》"),e.createTextVNode("和"),e.createElementVNode("a",{style:{color:"#3ab0de"}},"《隐私政策》")])],32),e.createElementVNode("view",{class:"last-row"},[e.createElementVNode("image",{src:"/static/login/wechat.png"}),e.createElementVNode("image",{src:"/static/login/QQ.png"})])])])}],["__scopeId","data-v-79c4eb5a"]]);const Q=o({data:()=>({}),methods:{login(){const e=getApp().globalData.backUrl+"/user/api/v1/loginFast";s("log","at pages/login/easy-login/easy-login.vue:34","phoneNumber: "+this.verifyCode),uni.request({url:e,method:"POST",data:{phone:this.phoneNumber},success:e=>{s("log","at pages/login/easy-login/easy-login.vue:42",e.data),this.text="request success",getApp().setToken(e.data.data.token,3600),s("log","at pages/login/easy-login/easy-login.vue:46",e.data.data.token),uni.navigateTo({url:"/pages/index/index",success(){s("log","at pages/login/easy-login/easy-login.vue:50",getApp().getToken())}})},fail(e){s("log","at pages/login/easy-login/easy-login.vue:55",e)}})}}},[["render",function(t,o,a,s,i,n){return e.openBlock(),e.createElementBlock("view",{class:"login"},[e.createElementVNode("view",{class:"head1"},[e.createElementVNode("image",{class:"home-icon",src:"/static/login/icon.png"}),e.createElementVNode("image",{class:"title",src:"/static/login/title.png"})]),e.createElementVNode("image",{class:"head2",src:"/static/login/subtitle.png"}),e.withDirectives(e.createElementVNode("input",{class:"input1",placeholder:"请输入手机号码","onUpdate:modelValue":o[0]||(o[0]=e=>t.phoneNumber=e),"placeholder-style":"font-size: 30rpx; color: rgba(0, 0, 0, 0.26);"},null,512),[[e.vModelText,t.phoneNumber]]),e.createElementVNode("checkbox-group",{onChange:o[1]||(o[1]=(...e)=>t.checkboxChange&&t.checkboxChange(...e)),class:"agreement"},[e.createElementVNode("label",null,[e.createElementVNode("checkbox",{class:"checkbox",checked:t.state,style:{transform:"scale(0.7)","border-radius":"50%"}},null,8,["checked"]),e.createTextVNode(" 我已阅读并同意"),e.createElementVNode("a",{style:{color:"#3ab0de"}},"《用户服务协议》"),e.createTextVNode("和"),e.createElementVNode("a",{style:{color:"#3ab0de"}},"《隐私政策》")])],32),e.createElementVNode("view",{class:"option",onClick:o[2]||(o[2]=(...e)=>n.login&&n.login(...e))}," 点击登录 "),e.createElementVNode("view",{style:{height:"100rpx"}})])}],["__scopeId","data-v-6a75c2d3"]]);__definePage("pages/index/index",m),__definePage("pages/test/test",g),__definePage("pages/smart-chat/smart-chat",b),__definePage("pages/photo-recog/photo-recog",E),__definePage("pages/assist-read/photo-recog",T),__definePage("pages/personal/personal",B),__definePage("pages/personal/profile/profile",z),__definePage("pages/personal/system/system",j),__definePage("pages/personal/account/account",J),__definePage("pages/test/test-record/test-record",X),__definePage("pages/login/login",G),__definePage("pages/login/verify-login/verify-login",W),__definePage("pages/login/easy-login/easy-login",Q);const K={globalData:{backUrl:"http://82.157.124.83:51603",baseUrl:"http://127.0.0.1:8000"},onLaunch:function(){s("log","at App.vue:8","App Launch"),this.getToken()},onShow:function(){s("log","at App.vue:13","App Show")},onHide:function(){s("log","at App.vue:16","App Hide")},methods:{setToken(e,t){let o={data:e,time:Date.now()/1e3,expire:t};uni.setStorageSync("token",JSON.stringify(o))},getToken(){let e=uni.getStorageSync("token");return e||uni.reLaunch({url:"/pages/login/login",success:()=>{s("log","at App.vue:34","jump to login")},fail(e){s("log","at App.vue:37",e)}}),e=JSON.parse(e),s("log","at App.vue:42","pre setCache:",e.data),e.expire&&Date.now()/1e3-e.time>e.expire&&(uni.removeStorageSync("token"),uni.reLaunch({url:"/pages/login/login",success:()=>{s("log","at App.vue:48","jump to login")},fail(e){s("log","at App.vue:51",e)}})),s("log","at App.vue:55","end setCache:",e.data),e.data}}};const{app:ee,Vuex:te,Pinia:oe}={app:e.createVueApp(K)};uni.Vuex=te,uni.Pinia=oe,ee.provide("__globalStyles",__uniConfig.styles),ee._component.mpType="app",ee._component.render=()=>{},ee.mount("#app")}(Vue,uni.VueShared);
